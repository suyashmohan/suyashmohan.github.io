<!DOCTYPE html><html><head><meta charset="utf-8"><title>Callback Hell, Promises, Generators &amp; Async-Await in Node.js/Javascript | Farzi Coder</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="If you have ever worked with javascript even for few minutes, chances are you have already used callbacks. Callbacks are a great way to do asynchronous programming. Javascript/Node.js embraces it more"><meta name="keywords" content="Node.js,Javascript"><meta property="og:type" content="article"><meta property="og:title" content="Callback Hell, Promises, Generators &amp; Async-Await in Node.js&#x2F;Javascript"><meta property="og:url" content="http://farzicoder.com/Callback-Hell-Promises-generators-Async-Await-in-Node-js-Javascript/index.html"><meta property="og:site_name" content="Farzi Coder"><meta property="og:description" content="If you have ever worked with javascript even for few minutes, chances are you have already used callbacks. Callbacks are a great way to do asynchronous programming. Javascript/Node.js embraces it more"><meta property="og:locale" content="default"><meta property="og:updated_time" content="2020-01-17T05:38:44.992Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Callback Hell, Promises, Generators &amp; Async-Await in Node.js&#x2F;Javascript"><meta name="twitter:description" content="If you have ever worked with javascript even for few minutes, chances are you have already used callbacks. Callbacks are a great way to do asynchronous programming. Javascript/Node.js embraces it more"><link rel="alternate" href="/atom.xml" title="Farzi Coder" type="application/atom+xml"><link rel="icon" href="/favicon.png"><link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet"><link rel="stylesheet" href="/css/style.css"><!-- Google Analytics --><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-100366340-1', 'auto');
ga('send', 'pageview');</script><!-- End Google Analytics --></head></html><body><div id="container"><div id="wrap"><header id="header"><div id="banner"></div><div id="header-outer" class="outer"><div id="header-title" class="inner"><h1 id="logo-wrap"><a href="/" id="logo">Farzi Coder</a></h1><h2 id="subtitle-wrap"><a href="/" id="subtitle">Adventures of a coder</a></h2></div><div id="header-inner" class="inner"><nav id="main-nav"><a id="main-nav-toggle" class="nav-icon"></a> <a class="main-nav-link" href="/">Home</a> <a class="main-nav-link" href="/archives">Archives</a></nav><nav id="sub-nav"><a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a> <a id="nav-search-btn" class="nav-icon" title="Search"></a></nav><div id="search-form-wrap"><form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://farzicoder.com"></form></div></div></div></header><div class="outer"><section id="main"><article id="post-Callback-Hell-Promises-generators-Async-Await-in-Node-js-Javascript" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/Callback-Hell-Promises-generators-Async-Await-in-Node-js-Javascript/" class="article-date"><time datetime="2017-06-17T04:11:00.000Z" itemprop="datePublished">2017-06-17</time></a><div class="article-category"><a class="article-category-link" href="/categories/Node-js/">Node.js</a></div></div><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">Callback Hell, Promises, Generators &amp; Async-Await in Node.js/Javascript</h1></header><div class="article-entry" itemprop="articleBody"><p>If you have ever worked with javascript even for few minutes, chances are you have already used callbacks. Callbacks are a great way to do asynchronous programming. Javascript/Node.js embraces it more than anything. They are everywhere. It might be fun to start with callbacks, but soon they become a hell.<br><a id="more"></a></p><h2 id="Callback-Hell"><a href="#Callback-Hell" class="headerlink" title="Callback Hell"></a>Callback Hell</h2><p><a href="http://callbackhell.com/" target="_blank" rel="external">http://callbackhell.com/</a> explains callback hell in very good manner. It’s a situation you get into when you have to call asynchronous code with an asynchronous flow. In simple words, calling callbacks inside each other. Nothing gets broken. It will still work but it becomes messy and difficult to understand what’s going on there. Let’s take an example:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> addOneTo = <span class="function"><span class="keyword">function</span>(<span class="params">number, callback</span>)</span>&#123;</div><div class="line">    <span class="keyword">let</span> result = number + <span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span>(callback)</div><div class="line">        callback(result);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 5 + 1 = 6</span></div><div class="line">addOneTo(<span class="number">5</span>, <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(res);</div><div class="line">&#125;)</div></pre></td></tr></table></figure><p>Here we defined a method named addOneTo that takes a number and returns number+1 through a callback. This is a simplified example, usually, I/O or time-consuming tasks are done using callbacks. Anyways we defined this method and then called it and got the result through the callback.</p><p>But what if we want to add 5 times one to 5 using the addOneTo method.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 5 + 1 + 1 + 1 + 1 + 1 = 10</span></div><div class="line">addOneTo(<span class="number">5</span>, <span class="function"><span class="keyword">function</span>(<span class="params">res1</span>)</span>&#123;</div><div class="line">    addOneTo(res1, <span class="function"><span class="keyword">function</span>(<span class="params">res2</span>)</span>&#123;</div><div class="line">        addOneTo(res2, <span class="function"><span class="keyword">function</span>(<span class="params">res3</span>)</span>&#123;</div><div class="line">            addOneTo(res3, <span class="function"><span class="keyword">function</span>(<span class="params">res4</span>)</span>&#123;</div><div class="line">                addOneTo(res4, <span class="function"><span class="keyword">function</span>(<span class="params">res5</span>)</span>&#123;</div><div class="line">                    <span class="built_in">console</span>.log(res5);</div><div class="line">                &#125;);</div><div class="line">            &#125;);</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p>Woah!!! What the hell! This is callback hell. It works, but it’s messy and difficult to understand.</p><h2 id="Promises"><a href="#Promises" class="headerlink" title="Promises"></a>Promises</h2><p>Promises are a great way to solve callback hells. In promises, we instead of calling the callback with the result, we return a promise that we are going to get you a result in future. Take a look at our new promise based addOneTo method</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> addOneTo = <span class="function"><span class="keyword">function</span>(<span class="params">number</span>)</span>&#123;</div><div class="line">    <span class="keyword">let</span> result = number + <span class="number">1</span>;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</div><div class="line">        resolve(result);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 5 + 1 = 6</span></div><div class="line">addOneTo(<span class="number">5</span>)</div><div class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(res);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure><p>A promise is an object that is returned immediately but the result arrives later in future. Promise takes a method with two arguments, <code>resolve</code> and <code>reject</code>. <code>resolve</code> is called when we have a result and reject is called when we have an error. This promise object returned has two methods, <code>then</code> and <code>catch</code>. <code>then</code> gets the result which was raised through the <code>resolve</code> method. <code>catch</code> gets the error thrown with the reject method. Mozilla has a great a documentation for <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="external">Promises</a>. Using promises we can chain our asynchronous call in a synchronous manner.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 5 + 1 + 1 + 1 + 1 + 1 = 10</span></div><div class="line">addOneTo(<span class="number">5</span>)</div><div class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">res1</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> addOneTo(res1);</div><div class="line">    &#125;)</div><div class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">res2</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> addOneTo(res2);</div><div class="line">    &#125;)</div><div class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">res3</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> addOneTo(res3);</div><div class="line">    &#125;)</div><div class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">res4</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> addOneTo(res4);</div><div class="line">    &#125;)</div><div class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">res5</span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(res5);</div><div class="line">    &#125;)</div></pre></td></tr></table></figure><p>This code is very simple to understand and easy to maintain. We can clearly see which code is called after which code and everything is still asynchronous.</p><h2 id="Generators"><a href="#Generators" class="headerlink" title="Generators"></a>Generators</h2><p>The approach to promises works fine. But still, it can be made simpler and cleaner using generators. Generators are functions with *. <code>function *()</code> is a generator. Generators are lightweight coroutines. Generators are functions which can be suspended or resumed in future. Usually, you won’t be directly dealing with generators yourself. There are libraries that use them and you can use these libraries to utilize generators. One such great library is <code>co</code>.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> co = <span class="built_in">require</span>(<span class="string">'co'</span>);</div><div class="line"></div><div class="line"><span class="keyword">const</span> addOneTo = <span class="function"><span class="keyword">function</span>(<span class="params">number</span>)</span>&#123;</div><div class="line">    <span class="keyword">let</span> result = number + <span class="number">1</span>;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</div><div class="line">        resolve(result);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">co(<span class="function"><span class="keyword">function</span> *(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">let</span> res1 = <span class="keyword">yield</span> addOneTo(<span class="number">5</span>);</div><div class="line">    <span class="keyword">let</span> res2 = <span class="keyword">yield</span> addOneTo(res1);</div><div class="line">    <span class="keyword">let</span> res3 = <span class="keyword">yield</span> addOneTo(res2);</div><div class="line">    <span class="keyword">let</span> res4 = <span class="keyword">yield</span> addOneTo(res3);</div><div class="line">    <span class="keyword">let</span> res5 = <span class="keyword">yield</span> addOneTo(res4);</div><div class="line"></div><div class="line">    <span class="keyword">return</span> res5;</div><div class="line">&#125;)</div><div class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(result);</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p>Here we wrote the same program we did with promises, using generators along with promises. The original method addOneTo remains the same. But how it is used is changed. We have used <code>co</code> library which provides a way to wrap generator method. There is also a new keyword <code>yield</code>. <code>yield</code> suspends the generators and only resumes it when we have received a result. This code looks just like synchronous code. But everything is still asynchronous. This made our program more clear to understand and extend later on.</p><h2 id="Async-amp-Await"><a href="#Async-amp-Await" class="headerlink" title="Async &amp; Await"></a>Async &amp; Await</h2><p>Wellcome to the future. Async &amp; Await are the next steps to the generators. Just like generators they also utilize promises but you don’t have to deal with 3rd party library such as <code>co</code>. Neither you have to get confused with <code>*</code> symbol. To use this feature, you need to define your method with <code>async</code> keyword to represent that our method is going to call asynchronous calls. Now we use <code>await</code> keyword to wait and fetch the result.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> addOnTo = <span class="function"><span class="keyword">function</span>(<span class="params">number</span>)</span>&#123;</div><div class="line">    <span class="keyword">let</span> result = number + <span class="number">1</span>;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</div><div class="line">        resolve(result);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">let</span> res1 = <span class="keyword">await</span> addOnTo(<span class="number">5</span>);</div><div class="line">    <span class="keyword">let</span> res2 = <span class="keyword">await</span> addOnTo(res1);</div><div class="line">    <span class="keyword">let</span> res3 = <span class="keyword">await</span> addOnTo(res2);</div><div class="line">    <span class="keyword">let</span> res4 = <span class="keyword">await</span> addOnTo(res3);</div><div class="line">    <span class="keyword">let</span> res5 = <span class="keyword">await</span> addOnTo(res4);</div><div class="line"></div><div class="line">    <span class="built_in">console</span>.log(res5);</div><div class="line">&#125;</div><div class="line"></div><div class="line">main();</div></pre></td></tr></table></figure><p>This approach is cleaner and easier to maintain compared to all other techniques discussed above.</p><p>All this code was tested using latest version of Node.js i.e. 8.0. Hope I was able to clearly explain all these topics clearly and with good examples. Hope you liked this post. If you have any question, advice, or query just comment it down.</p></div><footer class="article-footer"><a data-url="http://farzicoder.com/Callback-Hell-Promises-generators-Async-Await-in-Node-js-Javascript/" data-id="ck5vuei2h00017vmn2bcczixx" class="article-share-link">Share</a> <a href="http://farzicoder.com/Callback-Hell-Promises-generators-Async-Await-in-Node-js-Javascript/#disqus_thread" class="article-comment-link">Comments</a><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javascript/">Javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Node-js/">Node.js</a></li></ul></footer></div><nav id="article-nav"><a href="/Getting-Started-with-Smart-Contracts-Blockchain-Part-0-Understanding-Basics/" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">Newer</strong><div class="article-nav-title">Getting Started with Smart Contracts &amp; Blockchain - Part 0 Understanding Basics</div></a> <a href="/util-promisify-in-Node-js-v8/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">Older</strong><div class="article-nav-title">util.promisify() in Node.js v8</div></a></nav></article><section id="comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></section></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">Categories</h3><div class="widget"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Blockchain/">Blockchain</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/">Kubernetes</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node-js/">Node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Thoughts/">Thoughts</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Tags</h3><div class="widget"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blockchain/">Blockchain</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Containers/">Containers</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/">Database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ethereum/">Ethereum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Express-js/">Express.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/">Javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kubernetes/">Kubernetes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NPM/">NPM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node-js/">Node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Postgresql/">Postgresql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Smart-Contracts/">Smart Contracts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thoughts/">Thoughts</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Tag Cloud</h3><div class="widget tagcloud"><a href="/tags/Blockchain/" style="font-size: 16.67px">Blockchain</a> <a href="/tags/Containers/" style="font-size: 13.33px">Containers</a> <a href="/tags/Database/" style="font-size: 10px">Database</a> <a href="/tags/Ethereum/" style="font-size: 16.67px">Ethereum</a> <a href="/tags/Express-js/" style="font-size: 10px">Express.js</a> <a href="/tags/Javascript/" style="font-size: 20px">Javascript</a> <a href="/tags/Kubernetes/" style="font-size: 13.33px">Kubernetes</a> <a href="/tags/NPM/" style="font-size: 10px">NPM</a> <a href="/tags/Node-js/" style="font-size: 20px">Node.js</a> <a href="/tags/Postgresql/" style="font-size: 10px">Postgresql</a> <a href="/tags/Smart-Contracts/" style="font-size: 16.67px">Smart Contracts</a> <a href="/tags/Thoughts/" style="font-size: 10px">Thoughts</a></div></div><div class="widget-wrap"><h3 class="widget-title">Archives</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Recent Posts</h3><div class="widget"><ul><li><a href="/Setup-Databases-like-PostgreSQL-inside-Kubernetes-cluster/">Setup Databases like PostgreSQL inside Kubernetes cluster</a></li><li><a href="/Nginx-Ingress-setup-for-kubernetes/">Nginx Ingress setup for kubernetes</a></li><li><a href="/Writing-your-First-Smart-Contract-using-Solidity-Part-2-Getting-Started-with-Smart-Contracts-Blockchain/">Writing your first Smart Contract using Solidity - Part 2 - Getting Started with Smart Contracts &amp; Blockchain</a></li><li><a href="/Setting-up-Geth-Mist-TestRPC-Part-1-Getting-Start-with-Smart-Contracts/">Setting up Geth, Mist &amp; TestRPC - Part 1 - Getting Started with Smart Contracts &amp; Blockchain</a></li><li><a href="/Getting-Started-with-Smart-Contracts-Blockchain-Part-0-Understanding-Basics/">Getting Started with Smart Contracts &amp; Blockchain - Part 0 Understanding Basics</a></li></ul></div></div></aside></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">&copy; 2020 Suyash Mohan<br>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></div></div></footer></div><nav id="mobile-nav"><a href="/" class="mobile-nav-link">Home</a> <a href="/archives" class="mobile-nav-link">Archives</a></nav><script>var disqus_shortname = 'farzi-coder';
  
  var disqus_url = 'http://farzicoder.com/Callback-Hell-Promises-generators-Async-Await-in-Node-js-Javascript/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();</script><script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><link rel="stylesheet" href="/fancybox/jquery.fancybox.css"><script src="/fancybox/jquery.fancybox.pack.js"></script><script src="/js/script.js"></script></div></body>